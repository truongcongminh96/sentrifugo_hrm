TYPE=TRIGGERS
triggers='CREATE DEFINER=`root`@`%` TRIGGER `main_bgchecks_summary` AFTER INSERT ON `main_bgcheckdetails` FOR EACH ROW BEGIN\n					declare detailid,specimen_id, specimen_name, emp_id, specimen_flag_name, agency_name, \n						screening_type, created_name, modified_name,createdbyname,\n						modifiedbyname varchar(250);\n					declare	specimen_flag_id,agency_id,screeningtype_id int(11);\n					select id,flag,if(flag=1,\'Employee\',\'Candidate\')\n						into detailid,specimen_flag_id,specimen_flag_name\n						from main_bgcheckdetails where id = new.id;\n					if(specimen_flag_id = 1)then\n						select userfullname,id, employeeId into specimen_name,specimen_id,emp_id from main_users where id = new.specimen_id;\n					end if;\n					if(specimen_flag_id = 2) then\n						select candidate_name,id into specimen_name,specimen_id from main_candidatedetails where id = new.specimen_id;\n					end if;\n					select userfullname into createdbyname from main_users where id = new.createdby;\n					select userfullname into modifiedbyname from main_users where id = new.modifiedby;\n					select id,agencyname into agency_id,agency_name from main_bgagencylist where id = new.bgagency_id;\n					select id,type into screeningtype_id,screening_type from main_bgchecktype where id = new.bgcheck_type;\n					\n					insert into main_bgchecks_summary \n					(detail_id,specimen_name,specimen_id, specimen_flag,specimen_flag_name,employee_id,screeningtypeid,screeningtype_name,\n						agencyid,agencyname,process_status,month_name,year_year,createddate,modifieddate,createdby,createdname,modifiedby,modifiedname,\n						isactive,isactive_text)\n					values\n					(detailid,specimen_name,specimen_id,specimen_flag_id,specimen_flag_name,emp_id,screeningtype_id,screening_type, \n					agency_id,agency_name,new.process_status,month(new.createddate),year(new.createddate),new.createddate,new.modifieddate,new.createdby,createdbyname,new.modifiedby,modifiedbyname,\n					new.isactive,\n					if(new.isactive = 0,\'Process deleted\',if(new.isactive = 1,\'Active\',if(new.isactive = 2,\'Agency deleted\',if(new.isactive = 3,\'Agency User deleted\',if(new.isactive = 4,\'POC deleted\',\'Active\'))))));\n					\n				    END' 'CREATE DEFINER=`root`@`%` TRIGGER `main_bgchecks_aft_update` AFTER UPDATE ON `main_bgcheckdetails` FOR EACH ROW BEGIN\n					declare detailid,specimen_id, specimen_name, emp_id, specimen_flag_name, agency_name, \n						screening_type, created_name, modified_name,createdbyname,\n						modifiedbyname varchar(250);\n					declare	specimen_flag_id,agency_id,screeningtype_id int(11);\n					select id,flag,if(flag=1,\'Employee\',\'Candidate\')\n						into detailid,specimen_flag_id,specimen_flag_name\n						from main_bgcheckdetails where id = new.id;\n					if(specimen_flag_id = 1)then\n						select userfullname,id, employeeId into specimen_name,specimen_id,emp_id from main_users where id = new.specimen_id;\n					end if;\n					if(specimen_flag_id = 2) then\n						select candidate_name,id into specimen_name,specimen_id from main_candidatedetails where id = new.specimen_id;\n					end if;\n					select userfullname into createdbyname from main_users where id = new.createdby;\n					select userfullname into modifiedbyname from main_users where id = new.modifiedby;\n					select id,agencyname into agency_id,agency_name from main_bgagencylist where id = new.bgagency_id;\n					select id,type into screeningtype_id,screening_type from main_bgchecktype where id = new.bgcheck_type;\n					UPDATE  main_bgchecks_summary set	\n					detail_id = new.id , \n					specimen_name = specimen_name , \n					specimen_id = specimen_id , \n					specimen_flag = specimen_flag_id , \n					specimen_flag_name = specimen_flag_name , \n					employee_id = emp_id , \n					screeningtypeid = screeningtype_id , \n					screeningtype_name = screening_type , \n					agencyid = agency_id , \n					agencyname = agency_name , \n					process_status = new.process_status , \n					modifieddate = new.modifieddate, \n					modifiedby = new.modifiedby , \n					modifiedname = modifiedbyname , \n					isactive = new.isactive , \n					isactive_text = if(new.isactive = 0,\'Process deleted\',if(new.isactive = 1,\'Active\',if(new.isactive = 2,\'Agency deleted\',if(new.isactive = 3,\'Agency User deleted\',if(new.isactive = 4,\'POC deleted\',\'Active\')))))\n					where\n					detail_id = new.id ;\n				    END'
sql_modes=0 0
definers='root@%' 'root@%'
client_cs_names='utf8' 'utf8'
connection_cl_names='utf8_general_ci' 'utf8_general_ci'
db_cl_names='latin1_swedish_ci' 'latin1_swedish_ci'
