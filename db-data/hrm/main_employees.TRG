TYPE=TRIGGERS
triggers='CREATE DEFINER=`root`@`%` TRIGGER `main_employees_aft_ins` AFTER INSERT ON `main_employees` \n				    FOR EACH ROW BEGIN\n					declare user_id,fname,lname,username,role_name,rep_name,emp_status,bunit_name,dept_name,job_name,pos_name,prefix_name,\n						createdbyname,holidaygrp,modifiedbyname,emailid,cnumber,bgstatus,empid,mode_entry,omode_entry,sel_date,\n				                ref_by_name,img_src\n						varchar(250);\n					declare ref_by_id,role_id int(11);\n					select firstname,lastname,userfullname,emailaddress,contactnumber,backgroundchk_status,employeeId,modeofentry,other_modeofentry,selecteddate,candidatereferredby,\n				               profileimg,emprole  \n						into fname,lname,username,emailid,cnumber,bgstatus,empid,mode_entry,omode_entry,sel_date,ref_by_id,img_src,role_id \n					from main_users where id = new.user_id;\n					select userfullname into rep_name from main_users where id = new.reporting_manager;\n				/*\n					select employemnt_status into emp_status from tbl_employmentstatus where id = (select workcodename \n					from main_employmentstatus where id = new.emp_status_id);*/\n					select employemnt_status into emp_status from tbl_employmentstatus where id = new.emp_status_id	;\n					set user_id = new.user_id;\n					set bunit_name = null;\n					if new.businessunit_id is not null then\n						select unitname into bunit_name from main_businessunits where id = new.businessunit_id;\n					end if;\n					set holidaygrp = null;\n					if new.holiday_group is not null then\n						select groupname into holidaygrp from main_holidaygroups where id = new.holiday_group;\n					end if;\n					select deptname into dept_name from main_departments where id = new.department_id;\n					select jobtitlename into job_name from main_jobtitles where id = new.jobtitle_id;\n					select positionname into pos_name from main_positions where id = new.position_id;\n					select prefix into prefix_name from main_prefix where id = new.prefix_id;\n					select userfullname into createdbyname from main_users where id = new.createdby;\n					select rolename into role_name from main_roles where id = role_id;\n					if (ref_by_id != \'\' and ref_by_id > 0) then \n				        begin \n					    select userfullname into ref_by_name from main_users where id = ref_by_id;\n				        end;\n				        end if;\n				insert into main_employees_summary ( \n					user_id, date_of_joining, date_of_leaving, reporting_manager, reporting_manager_name, emp_status_id, \n					emp_status_name, businessunit_id, businessunit_name, department_id, department_name, jobtitle_id, \n					jobtitle_name, position_id, position_name, years_exp, holiday_group, holiday_group_name, \n					prefix_id, prefix_name, extension_number, office_number, office_faxnumber, emprole, \n					emprole_name, firstname,lastname,userfullname, emailaddress, contactnumber, backgroundchk_status, 	employeeId, \n					modeofentry, other_modeofentry, selecteddate, candidatereferredby, referer_name, profileimg, \n					createdby, createdby_name, modifiedby, createddate, modifieddate, isactive)\n					values	(	\n					new.user_id, new.date_of_joining, new.date_of_leaving,new.reporting_manager,rep_name,new.emp_status_id, \n					emp_status,new.businessunit_id,	bunit_name,new.department_id,dept_name,new.jobtitle_id, \n					job_name, new.position_id, pos_name,new.years_exp, new.holiday_group, holidaygrp, \n					new.prefix_id, 	prefix_name, new.extension_number, new.office_number, new.office_faxnumber,role_id, \n					role_name,fname,lname,username, emailid,cnumber,bgstatus,empid, \n					mode_entry,omode_entry,	sel_date, ref_by_id, ref_by_name,img_src, \n					new.createdby, 	createdbyname, new.modifiedby,new.createddate, new.modifieddate, new.isactive\n					);\n				    END' 'CREATE DEFINER=`root`@`%` TRIGGER `main_employees_aft_upd` AFTER UPDATE ON `main_employees` \n				    FOR EACH ROW BEGIN\n					declare fname,lname,username,role_name,rep_name,emp_status,bunit_name,dept_name,job_name,pos_name,prefixname,\n						createdbyname,holidaygrp,modifiedbyname,emailid,cnumber,bgstatus,empid,mode_entry,omode_entry,sel_date,\n				                ref_by_name,img_src\n						varchar(250);\n					declare ref_by_id,role_id int(11);\n					select firstname,lastname,userfullname,emailaddress,contactnumber,backgroundchk_status,employeeId,modeofentry,other_modeofentry,selecteddate,candidatereferredby,\n				               profileimg,emprole  \n						into fname,lname,username,emailid,cnumber,bgstatus,empid,mode_entry,omode_entry,sel_date,ref_by_id,img_src,role_id \n					from main_users where id = new.user_id;\n					select userfullname into rep_name from main_users where id = new.reporting_manager;\n					/*select employemnt_status into emp_status from tbl_employmentstatus where id = (select workcodename \n					from main_employmentstatus where id = new.emp_status_id);*/\n					select employemnt_status into emp_status from tbl_employmentstatus where id = new.emp_status_id	;\n					set bunit_name = null;\n					if new.businessunit_id is not null then\n						select unitname into bunit_name from main_businessunits where id = new.businessunit_id;\n					end if;\n					set holidaygrp = null;\n					if new.holiday_group is not null then\n						select groupname into holidaygrp from main_holidaygroups where id = new.holiday_group;\n					end if;\n					select deptname into dept_name from main_departments where id = new.department_id;\n					select jobtitlename into job_name from main_jobtitles where id = new.jobtitle_id;\n					select positionname into pos_name from main_positions where id = new.position_id;\n					select prefix into prefixname from main_prefix where id = new.prefix_id;\n					select userfullname into createdbyname from main_users where id = new.createdby;\n					select rolename into role_name from main_roles where id = role_id;\n					if (ref_by_id != \'\' and ref_by_id > 0) then \n				        begin \n					    select userfullname into ref_by_name from main_users where id = ref_by_id;\n				        end;\n				        end if;\n				        update main_employees_summary set  \n					 date_of_joining = new.date_of_joining, date_of_leaving = new.date_of_leaving, reporting_manager = new.reporting_manager, \n				         reporting_manager_name = rep_name, emp_status_id = new.emp_status_id, 	emp_status_name = emp_status, \n					businessunit_id = new.businessunit_id, businessunit_name = bunit_name, department_id = new.department_id, \n				        department_name = dept_name, jobtitle_id = new.jobtitle_id,jobtitle_name = job_name, position_id = new.position_id, \n				        position_name = pos_name, years_exp = new.years_exp, holiday_group = new.holiday_group, holiday_group_name = holidaygrp, \n					prefix_id = new.prefix_id, prefix_name = prefixname, extension_number = new.extension_number, office_number = new.office_number, \n					office_faxnumber = new.office_faxnumber, emprole = role_id, emprole_name = role_name, firstname=fname, lastname=lname,userfullname = username, \n					emailaddress = emailid, contactnumber = cnumber, backgroundchk_status = bgstatus,employeeId = empid, \n					modeofentry = mode_entry, other_modeofentry = omode_entry, selecteddate = sel_date, candidatereferredby = ref_by_id,\n					referer_name = ref_by_name, profileimg = img_src,  modifiedby = new.modifiedby, modifieddate = new.modifieddate, isactive = new.isactive\n					\n					 where user_id = new.user_id;\n				    END'
sql_modes=0 0
definers='root@%' 'root@%'
client_cs_names='utf8' 'utf8'
connection_cl_names='utf8_general_ci' 'utf8_general_ci'
db_cl_names='latin1_swedish_ci' 'latin1_swedish_ci'
