TYPE=TRIGGERS
triggers='CREATE DEFINER=`root`@`%` TRIGGER `main_leavemanagement_aft_ins` AFTER INSERT ON `main_leavemanagement` FOR EACH ROW BEGIN\n				    declare calmonth_name,weekend_name1,weekend_name2,dept_name,buss_unit_name varchar(200);\n				    declare dept_id,bunit_id bigint(20);\n				    select month_name into calmonth_name from tbl_months where monthid = new.cal_startmonth;\n				    select week_name into weekend_name1 from tbl_weeks where week_id = new.weekend_startday;\n				    select week_name into weekend_name2 from tbl_weeks where week_id = new.weekend_endday;\n				    #select department_id into dept_id from main_employees where user_id = new.user_id;\n				    select b.id,concat(d.deptname," (",d.deptcode,")") ,\n				    if(b.unitcode != "000",concat(b.unitcode,"","-"),"") into bunit_id,dept_name,buss_unit_name \n				    FROM `main_departments` AS `d` LEFT JOIN `main_businessunits` AS `b` ON b.id=d.unitid \n				    WHERE (d.isactive = 1 and d.id = new.department_id);\n				    insert into main_leavemanagement_summary (leavemgmt_id, cal_startmonth, cal_startmonthname, \n				    weekend_startday, weekend_startdayname, weekend_endday,weekend_enddayname, businessunit_id, \n				    businessunit_name, department_id, department_name, hours_day, is_satholiday, is_halfday, \n				    is_leavetransfer, is_skipholidays, description, createdby, modifiedby, createddate, \n				    modifieddate, isactive)\n				    values(new.id,new.cal_startmonth, calmonth_name, new.weekend_startday, weekend_name1,\n				    new.weekend_endday,weekend_name2,bunit_id, buss_unit_name, new.department_id, \n				    dept_name, new.hours_day, new.is_satholiday, new.is_halfday, new.is_leavetransfer, \n				    new.is_skipholidays, new.description,  new.createdby, new.modifiedby, new.createddate, \n				    new.modifieddate, new.isactive);\n				    END' 'CREATE DEFINER=`root`@`%` TRIGGER `main_leavemanagement_aft_upd` AFTER UPDATE ON `main_leavemanagement` FOR EACH ROW BEGIN\n				    declare calmonth_name,weekend_name1,weekend_name2,dept_name,buss_unit_name varchar(200);\n				    declare bunit_id bigint(20);\n				    select month_name into calmonth_name from tbl_months where monthid = new.cal_startmonth;\n				    select week_name into weekend_name1 from tbl_weeks where week_id = new.weekend_startday;\n				    select week_name into weekend_name2 from tbl_weeks where week_id = new.weekend_endday;\n				    select b.id,concat(d.deptname," (",d.deptcode,")") ,\n				    if(b.unitcode != "000",concat(b.unitcode,"","-"),"") into bunit_id,dept_name,buss_unit_name \n				    FROM `main_departments` AS `d` LEFT JOIN `main_businessunits` AS `b` ON b.id=d.unitid \n				    WHERE (d.isactive = 1 and d.id = new.department_id);\n				    UPDATE  main_leavemanagement_summary set\n				    cal_startmonth = new.cal_startmonth, \n				    cal_startmonthname = calmonth_name, \n				    weekend_startday = new.weekend_startday, \n				    weekend_startdayname = weekend_name1,\n				    weekend_endday = new.weekend_endday, \n				    weekend_enddayname = weekend_name2, \n				    businessunit_id = bunit_id, \n				    businessunit_name = buss_unit_name, \n				    department_id = new.department_id, \n				    department_name = dept_name, \n				    hours_day = new.hours_day, \n				    is_satholiday = new.is_satholiday, \n				    is_halfday = new.is_halfday, \n				    is_leavetransfer = new.is_leavetransfer, \n				    is_skipholidays = new.is_skipholidays, \n				    description = new.description, \n				    createdby = new.createdby, \n				    modifiedby = new.modifiedby, \n				    createddate = new.createddate, \n				    modifieddate = new.modifieddate, \n				    isactive = new.isactive where leavemgmt_id = new.id;\n				    END'
sql_modes=0 0
definers='root@%' 'root@%'
client_cs_names='utf8' 'utf8'
connection_cl_names='utf8_general_ci' 'utf8_general_ci'
db_cl_names='latin1_swedish_ci' 'latin1_swedish_ci'
